{% extends "page.html" %}

{% block content %}

{% include "subnav.html" with {'active': 'table'} %}

<p>{{row_count}} record{% if row_count > 1 %}s{% endif %}</p>

{% include "pagination.html" %}

<table>
    <thead>
        <tr>
            <th></th>
            {% for column in table.columns %}
            <th>{{column.title}}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for record in records %}
        <tr>
            <td><a href="{{baseurl}}/record/{{table.name}}/{{record.getPrimaryKey}}" class="">Edit</a></td>
            {% for column in table.columns %}
            <td class="type-{{ column.type }} {% if column.isForeignKey %}is-foreign-key{% endif %}">

                {% if column.isForeignKey %}
                <a href="{{baseurl}}/record/{{column.getReferencedTable.name}}/{{ attribute(record, column.name) }}">
                    {{ attribute(record, column.name~'FKTITLE') }}
                </a>

                {% elseif column.isBoolean %}
                {% if attribute(record, column.name) == 1 %}
                Yes
                {% elseif attribute(record, column.name) == null %}
                
                {% else %}
                No
                {% endif %}

                {% else %}
                {{ attribute(record, column.name) }}

                {% endif %}
            </td>
            {% endfor %}
        </tr>
        {% endfor %}
    </tbody>
</table>

{%endblock%}
